<div class="container" fxLayout="column" fxLayoutAlign="row center" fxFlexFill>
  <div class="card">
    <h2>Focused</h2>
    <mat-accordion id="focused-list" class="list" cdkDropList #focusedList="cdkDropList" [cdkDropListData]="focusedTasks" [cdkDropListConnectedTo]="[backlogList, doneList]" (cdkDropListDropped)="drop($event)">
      <ng-container *ngFor="let task of focusedTasks | async">
        <mat-expansion-panel cdkDrag [cdkDragData]="task" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-checkbox color="primary" disableRipple="true"
                [checked]="task.isDone"
                (change)="onDoneChange($event, task)"
                (click)="$event.stopPropagation()"
                (keydown)="$event.stopPropagation()">
                {{ task.title }}
              </mat-checkbox>
            </mat-panel-title>
            <mat-panel-description>{{ task.category }}</mat-panel-description>
          </mat-expansion-panel-header>
          <p>{{ task.description }}</p>
        </mat-expansion-panel>
      </ng-container>
    </mat-accordion>
  </div>
  <div class="card">
    <h2>Backlog</h2>
    <mat-accordion id="backlog-list" class="list" cdkDropList #backlogList="cdkDropList" [cdkDropListData]="backlogTasks" [cdkDropListConnectedTo]="[focusedList, doneList]" (cdkDropListDropped)="drop($event)">
      <ng-container *ngFor="let task of backlogTasks | async">
        <mat-expansion-panel cdkDrag [cdkDragData]="task" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-checkbox color="primary" disableRipple="true"
                [checked]="task.isDone"
                (change)="onDoneChange($event, task)"
                (click)="$event.stopPropagation()"
                (keydown)="$event.stopPropagation()">
                {{ task.title }}
              </mat-checkbox>
            </mat-panel-title>
            <mat-panel-description>{{ task.category }}</mat-panel-description>
          </mat-expansion-panel-header>
          <p>{{ task.description }}</p>
        </mat-expansion-panel>
      </ng-container>
    </mat-accordion>
  </div>
  <div class="card">
    <h2>Done</h2>
    <mat-accordion id="done-list" class="list" cdkDropList #doneList="cdkDropList" [cdkDropListData]="doneTasks" [cdkDropListConnectedTo]="[focusedList, backlogList]" (cdkDropListDropped)="drop($event)">
      <ng-container *ngFor="let task of doneTasks | async">
        <mat-expansion-panel cdkDrag [cdkDragData]="task" hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-checkbox color="primary" disableRipple="true"
                [checked]="task.isDone"
                (change)="onDoneChange($event, task)"
                (click)="$event.stopPropagation()"
                (keydown)="$event.stopPropagation()">
                {{ task.title }}
              </mat-checkbox>
            </mat-panel-title>
            <mat-panel-description>{{ task.category }}</mat-panel-description>
          </mat-expansion-panel-header>
          <p>{{ task.description }}</p>
        </mat-expansion-panel>
      </ng-container>
    </mat-accordion>
  </div>
</div>
